{% extends "base.html" %}

{% block title %}–ó–∞–¥–∞—á–∏ - Task Manager{% endblock %}

{% block content %}
<h1>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>

<!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
<div class="card">
    <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h2>
    <form action="{{ url_for('add_task') }}" method="POST">
        <div class="form-group">
            <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
            <input type="text" id="title" name="title" required placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?">
        </div>
        <div class="form-group">
            <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <textarea id="description" name="description" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
        </div>
        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</button>
    </form>
</div>

<!-- –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
<div class="card">
    <h2>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á ({{ tasks|length }})</h2>
    
    {% if tasks %}
        <ul class="task-list">
            {% for task in tasks %}
            <li class="task-item {% if task.completed %}completed{% endif %}">
                <div class="task-info">
                    <strong>{{ task.title }}</strong>
                    {% if task.description %}
                        <p>{{ task.description }}</p>
                    {% endif %}
                </div>
                <div class="task-actions">
                    <form action="{{ url_for('toggle_task', task_id=task.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-small">
                            {% if task.completed %}‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å{% else %}‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ{% endif %}
                        </button>
                    </form>
                    <form action="{{ url_for('delete_task', task_id=task.id) }}" method="POST" style="display:inline;">
                        <button type="submit" class="btn btn-small btn-danger" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </div>
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="empty-message">–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é!</p>
    {% endif %}
</div>
{% endblock %}
